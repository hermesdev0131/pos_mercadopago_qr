<?xml version="1.0" encoding="UTF-8"?>
<templates>

    <t t-name="pos_mercadopago_qr.PaymentMethodLineMP">
        <div class="mp-box o_pos_paymentline_extra" style="padding: 15px; background: #fff; border: 1px solid #ddd; margin: 10px; text-align: center;">
             <t t-if="mpState.status == 'idle'">
                <button class="btn btn-primary" t-on-click="startMercadoPago">Generate QR</button>
            </t>
            <t t-if="mpState.status == 'loading'"><span>Loading...</span></t>
            <t t-if="mpState.status == 'pending'">
                <img t-att-src="mpState.qr_url" style="width: 200px;"/>
                <p>Scan to Pay</p>
            </t>
            <t t-if="mpState.status == 'approved'"><p style="color:green">Approved!</p></t>
            <t t-if="mpState.status == 'error'"><p style="color:red"><t t-esc="mpState.error"/></p></t>
        </div>
    </t>

    <t t-name="pos_mercadopago_qr.PaymentScreen" t-inherit="point_of_sale.PaymentScreen" t-inherit-mode="extension">
        
        <xpath expr="//div[hasclass('payment-screen')]" position="inside">
            <div class="mp-overlay-container" 
                 style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; 
                        display: flex; align-items: center; justify-content: center; 
                        pointer-events: none; z-index: 100;">
                
                <t t-if="isMercadoPago">
                    <div style="pointer-events: auto; background: white; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.2); border-radius: 10px;">
                        <t t-call="pos_mercadopago_qr.PaymentMethodLineMP"/>
                    </div>
                </t>
            </div>
        </xpath>
        
    </t>

</templates>