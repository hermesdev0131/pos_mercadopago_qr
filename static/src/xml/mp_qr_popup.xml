<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="pos_mercadopago_qr.MPQRPopup">
        <Dialog title="props.title">
            <div class="mp-popup-content d-flex flex-column align-items-center gap-3 p-3 text-center">
                
                <t t-if="props.status === 'idle'">
                    <p class="text-muted">Click below to generate the QR Code</p>
                    <button class="btn btn-primary btn-lg w-100" t-on-click="props.onStart">
                        Generate QR ($ <t t-esc="props.amount"/>)
                    </button>
                </t>

                <t t-if="props.status === 'loading'">
                    <i class="fa fa-spinner fa-spin fa-3x text-primary"/>
                    <p>Connecting to Mercado Pago...</p>
                </t>

                <t t-if="props.status === 'pending'">
                    <div class="border p-2 rounded">
                        <img t-att-src="props.qr_url" style="width: 250px; height: 250px; object-fit: contain;"/>
                    </div>
                    <div class="text-muted mt-2">
                        <i class="fa fa-circle-o-notch fa-spin"/> Waiting for payment...
                    </div>
                </t>

                <t t-if="props.status === 'approved'">
                    <i class="fa fa-check-circle fa-5x text-success"/>
                    <h3 class="text-success mt-2">Payment Approved!</h3>
                    <button class="btn btn-secondary w-100 mt-3" t-on-click="props.onClose">Close</button>
                </t>

                <t t-if="props.status === 'error'">
                    <i class="fa fa-exclamation-triangle fa-3x text-danger"/>
                    <p class="text-danger fw-bold mt-2"><t t-esc="props.error"/></p>
                    <button class="btn btn-secondary w-100" t-on-click="props.onRetry">Retry</button>
                </t>

                <t t-if="props.status !== 'approved'">
                    <button class="btn btn-link text-muted mt-2" t-on-click="props.onClose">
                        Cancel / Close
                    </button>
                </t>
            </div>
        </Dialog>
    </t>

</templates>