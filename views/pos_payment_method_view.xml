<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_pos_payment_method_form_inherit" model="ir.ui.view">
        <field name="name">pos.payment.method.form.inherit.mercadopago</field>
        <field name="model">pos.payment.method</field>
        <field name="inherit_id" ref="point_of_sale.pos_payment_method_view_form"/>
        <field name="arch" type="xml">
            <!-- Position after "Online payment" field using label-based XPath (case-insensitive) -->
            <!-- This places the checkbox between "Online payment" and "Identify customer" -->
            <xpath expr="//field[contains(translate(@string, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'online payment')]" position="after">
                <field name="use_mercadopago_qr" 
                       string="Use MercadoPago QR"/>
            </xpath>
            <!-- Fallback: If "Online payment" field not found, position at end of first group with fields -->
            <!-- This ensures the field is always added with visible label -->
            <xpath expr="(//group[.//field[@name='name']])[1]" position="inside">
                <field name="use_mercadopago_qr" 
                       string="Use MercadoPago QR"/>
            </xpath>
        </field>
    </record>
</odoo>